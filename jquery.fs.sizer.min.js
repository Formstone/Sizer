/*
 * Sizer Plugin [Formstone Library]
 * @author Ben Plum
 * @version 0.1.4
 *
 * Copyright (c) 2013 Ben Plum <mr@benplum.com>
 * Released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
 */
 
if(jQuery)(function(b){function g(a){a=b.extend({},f,a);for(var e=b(this),c=0,h=e.length;c<h;c++)k(e.eq(c),a);return e}function k(a,e){var c=b.extend({},{$sizer:a,$items:a.find(".sizer-item"),updateParent:a.hasClass("sizer-update")||0<a.find(".sizer-update").length,diabled:!1,guid:l++},e);c.$items.wrapInner('<div class="sizer-size" />');c.$sizer.addClass("sizer-ready").data("sizer",c).on("resize.sizer",c,d.resize).trigger("resize.sizer");c.$sizer.find("img").each(function(){var a=b(this);if(a[0].complete)b(this).trigger("resize.sizer"); else a.on("load",function(){b(this).trigger("resize.sizer")})})}function m(a){if(a.minWidth<Site.maxWidth){for(var b=0,c=0;c<a.$items.length;c++){var d=a.$items.eq(c).find(".sizer-size").outerHeight(!0);d>b&&(b=d)}a.$items.css({height:b});a.updateParent&&a.$sizer.css({height:b}).find(".sizer-update").css({height:b})}else a.$items.css({height:""}),a.$sizer.css({height:""})}var l=0,f={minWidth:0},d={defaults:function(a){f=b.extend(f,a||{});return b(this)},disable:function(){b(this).each(function(){var a= b(this).data("sizer");a.disabled=!0;a.$sizer.off("resize.sizer");a.$items.css({height:""});a.updateParent&&a.$sizer.css({height:""}).find(".sizer-update").css({height:""})})},enable:function(){b(this).each(function(){var a=b(this).data("sizer");a.disabled&&(a.disabled=!1,a.$sizer.on("resize.sizer",a,d.resize).trigger("resize.sizer"))})},resize:function(a){a=a.data;b.doTimeout("sizer-"+a.guid+"-reset",Site.debounceTime,m,a)}};b.fn.sizer=function(a){return d[a]?d[a].apply(this,Array.prototype.slice.call(arguments, 1)):"object"!==typeof a&&a?this:g.apply(this,arguments)}})(jQuery);